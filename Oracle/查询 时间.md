
- oracle获取系统当前时间有两种： 一种是 date 类型，一种是 timestamp 类型

```sql
SELECT SYSDATE FROM DUAL

SELECT SYSTIMESTAMP FROM DUAL
```

------------

- date，timestamp  转 string

```sql
SELECT TO_CHAR(SYSDATE,'YYYY-MM-DD HH24:MI:SS') FROM DUAL

SELECT TO_CHAR(SYSTIMESTAMP,'YYYY-MM-DD HH24:MI:SS:FF9') FROM DUAL
-- timestamp 可以精确到 纳秒

```

------------

- 字符串 转 date，timestamp

```sql
// 它们是等价的
SELECT TO_DATE('2022-05-18 09:38:47', 'YYYY-MM-DD HH24:MI:SS') TESTTIME FROM DUAL
SELECT TO_DATE('2022-5-18 09:38:47', 'YYYY-MM-DD HH24:MI:SS') TESTTIME FROM DUAL
SELECT TO_DATE('2022/05/18 09:38:47', 'YYYY-MM-DD HH24:MI:SS') TESTTIME FROM DUAL
SELECT TO_DATE('2022/5/18 09:38:47', 'YYYY-MM-DD HH24:MI:SS') TESTTIME FROM DUAL
```

------------

- date，timestamp 和 number 运算：

```sql
-- NUMTOYMINTERVAL 年月
SELECT SYSDATE + NUMTOYMINTERVAL(1, 'YEAR') FROM DUAL
SELECT SYSDATE + NUMTOYMINTERVAL(1, 'MONTH') FROM DUAL

-- numtodsinterval 日时分秒
SELECT SYSDATE + NUMTODSINTERVAL(1, 'DAY') FROM DUAL
SELECT SYSDATE + NUMTODSINTERVAL(1, 'HOUR') FROM DUAL
SELECT SYSDATE + NUMTODSINTERVAL(1, 'MINUTE') FROM DUAL
SELECT SYSDATE + NUMTODSINTERVAL(1, 'SECOND') FROM DUAL

-- 加天数
SELECT SYSDATE + 1 FROM DUAL
SELECT SYSDATE + 10/1440 FROM DUAL
```

```sql
SELECT TO_CHAR(SYSTIMESTAMP - INTERVAL '1' YEAR,'YYYY-MM-DD hh24:mi:ss:ff6') FROM DUAL
SELECT TO_CHAR(SYSTIMESTAMP - INTERVAL '1' MONTH,'YYYY-MM-DD hh24:mi:ss:ff6') FROM DUAL
SELECT TO_CHAR(SYSTIMESTAMP - INTERVAL '1' DAY,'YYYY-MM-DD hh24:mi:ss:ff6') FROM DUAL
SELECT TO_CHAR(SYSTIMESTAMP - INTERVAL '1' HOUR,'YYYY-MM-DD hh24:mi:ss:ff6') FROM DUAL
SELECT TO_CHAR(SYSTIMESTAMP - INTERVAL '1' MINUTE,'YYYY-MM-DD hh24:mi:ss:ff6') FROM DUAL
SELECT TO_CHAR(SYSTIMESTAMP - INTERVAL '1' SECOND,'YYYY-MM-DD hh24:mi:ss:ff6') FROM DUAL
```

------------

- date 和 date 运算

```sql
// 结果是天数
SELECT TO_DATE('2022/5/19 20:38:47', 'YYYY-MM-DD HH24:MI:SS') -
       TO_DATE('2022/5/18 19:38:47', 'YYYY-MM-DD HH24:MI:SS')
  FROM DUAL

// 结果是分钟
SELECT (TO_DATE('2022/5/19 20:38:47', 'YYYY-MM-DD HH24:MI:SS') -
       TO_DATE('2022/5/18 19:38:47', 'YYYY-MM-DD HH24:MI:SS')) * 24 * 60
  FROM DUAL
```

------------

- date 和 number 运算

```sql
select sysdate + 1 from dual
select add_months(sysdate, 1) from dual
select add_months(sysdate, 1 * 12) from dual

select sysdate + 1 / 24 from dual
select sysdate + 1 / 24 / 60 from dual
```

------------

```sql
// 将 61.05 分钟 转化为 时：分：秒 1:01:03
SELECT TO_CHAR(TRUNC(MINUTES / 60), 'FM990') || ':' ||
       TO_CHAR(FLOOR(MOD(MINUTES, 60)),'FM00') || ':' ||
       TO_CHAR(MOD(MINUTES * 60, 60),'FM00')
FROM (SELECT 61.05 AS MINUTES FROM DUAL)
```


